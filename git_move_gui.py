def get_moves(position, other_pos, board_state=None):
    # دي دالة بتجيب الحركات المسموح بيها من مكان اللاعب الحالي
    # بتاخد مكان اللاعب (position)، مكان الخصم (other_pos)، وحالة البورد لو موجودة

    b = board_state if board_state is not None else board  
    # لو فيه بورد اتبعت للدالة هنستخدمه، لو لأ هنستخدم البورد الأساسي (global)

    r, c = position  
    # هنا بفك مكان اللاعب لصف (r) وعمود (c) عشان أسهل الحسابات

    moves = []  
    # دي قائمة فاضية هنحط فيها كل الحركات اللي تنفع

    # هنلف على الأربع اتجاهات الأساسية: فوق، تحت، شمال، يمين
    for dr, dc in [(-1, 0), (1, 0), (0, -1), (0, 1)]:
        nr, nc = r + dr, c + dc  
        # بنحسب الصف والعمود الجديدين بعد ما نتحرك خطوة واحدة في الاتجاه ده

        if 0 <= nr < SIZE and 0 <= nc < SIZE:  
            # بنتأكد إن المكان الجديد جوه حدود البورد ومش خارجها

            if b[nr][nc] == 0 and (nr, nc) != other_pos:  
                # بنتأكد إن الخانة فاضية (0 يعني مش محجوزة) وكمان مش مكان الخصم

                moves.append((nr, nc))  
                # لو الشرطين اتحققوا، نضيف الحركة دي للقائمة

    return moves  
    # في الآخر بنرجع كل الحركات اللي تنفع من المكان الحالي
